# Generated by Django 5.2.6 on 2025-09-20 16:04

import django.core.validators
import django.db.models.deletion
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('core', '0006_exporttemplate_dialogueoption_color_and_more'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.AlterModelOptions(
            name='character',
            options={'ordering': ['name'], 'verbose_name': 'Character', 'verbose_name_plural': 'Characters'},
        ),
        migrations.AlterModelOptions(
            name='quest',
            options={'ordering': ['-created_at']},
        ),
        migrations.RemoveField(
            model_name='quest',
            name='dialogue',
        ),
        migrations.AddField(
            model_name='character',
            name='intellect',
            field=models.IntegerField(default=2, help_text='Intellect attribute (1-20)', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(20)]),
        ),
        migrations.AddField(
            model_name='character',
            name='motorics',
            field=models.IntegerField(default=2, help_text='Motorics attribute (1-20)', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(20)]),
        ),
        migrations.AddField(
            model_name='character',
            name='physique',
            field=models.IntegerField(default=2, help_text='Physique attribute (1-20)', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(20)]),
        ),
        migrations.AddField(
            model_name='character',
            name='project',
            field=models.ForeignKey(blank=True, help_text='Project this character belongs to', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='characters', to='core.gameproject'),
        ),
        migrations.AddField(
            model_name='character',
            name='psyche',
            field=models.IntegerField(default=2, help_text='Psyche attribute (1-20)', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(20)]),
        ),
        migrations.AddField(
            model_name='dialogueoption',
            name='quest_completion',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='completion_options', to='core.quest'),
        ),
        migrations.AddField(
            model_name='dialogueoption',
            name='quest_trigger',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='trigger_options', to='core.quest'),
        ),
        migrations.AddField(
            model_name='quest',
            name='color',
            field=models.CharField(default='#10B981', help_text='–¶–≤–µ—Ç –∫–≤–µ—Å—Ç–∞', max_length=7),
        ),
        migrations.AddField(
            model_name='quest',
            name='completion_dialogue',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='quest_completions', to='core.dialogue'),
        ),
        migrations.AddField(
            model_name='quest',
            name='deadline',
            field=models.DateTimeField(blank=True, help_text='–î–µ–¥–ª–∞–π–Ω –∫–≤–µ—Å—Ç–∞', null=True),
        ),
        migrations.AddField(
            model_name='quest',
            name='experience_reward',
            field=models.IntegerField(default=0),
        ),
        migrations.AddField(
            model_name='quest',
            name='failure_dialogue',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='quest_failures', to='core.dialogue'),
        ),
        migrations.AddField(
            model_name='quest',
            name='icon',
            field=models.CharField(default='üìã', help_text='–ò–∫–æ–Ω–∫–∞ –∫–≤–µ—Å—Ç–∞', max_length=50),
        ),
        migrations.AddField(
            model_name='quest',
            name='item_rewards',
            field=models.JSONField(blank=True, default=list, help_text='–ù–∞–≥—Ä–∞–¥—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤'),
        ),
        migrations.AddField(
            model_name='quest',
            name='max_progress',
            field=models.IntegerField(default=100, help_text='–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å'),
        ),
        migrations.AddField(
            model_name='quest',
            name='metadata',
            field=models.JSONField(blank=True, default=dict, help_text='–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ'),
        ),
        migrations.AddField(
            model_name='quest',
            name='prerequisites',
            field=models.ManyToManyField(blank=True, related_name='unlocks', to='core.quest'),
        ),
        migrations.AddField(
            model_name='quest',
            name='priority',
            field=models.CharField(choices=[('low', '–ù–∏–∑–∫–∏–π'), ('normal', '–û–±—ã—á–Ω—ã–π'), ('high', '–í—ã—Å–æ–∫–∏–π'), ('critical', '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π')], default='normal', max_length=10),
        ),
        migrations.AddField(
            model_name='quest',
            name='progress',
            field=models.IntegerField(default=0, help_text='–ü—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ç 0 –¥–æ 100'),
        ),
        migrations.AddField(
            model_name='quest',
            name='quest_giver',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='given_quests', to='core.npc'),
        ),
        migrations.AddField(
            model_name='quest',
            name='required_items',
            field=models.JSONField(blank=True, default=list, help_text='–¢—Ä–µ–±—É–µ–º—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã'),
        ),
        migrations.AddField(
            model_name='quest',
            name='required_skills',
            field=models.JSONField(blank=True, default=dict, help_text="–¢—Ä–µ–±—É–µ–º—ã–µ –Ω–∞–≤—ã–∫–∏: {'skill_name': min_value}"),
        ),
        migrations.AddField(
            model_name='quest',
            name='skill_rewards',
            field=models.JSONField(blank=True, default=dict, help_text="–ù–∞–≥—Ä–∞–¥—ã –Ω–∞–≤—ã–∫–æ–≤: {'skill_name': bonus}"),
        ),
        migrations.AddField(
            model_name='quest',
            name='start_dialogue',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='quest_starts', to='core.dialogue'),
        ),
        migrations.AddField(
            model_name='quest',
            name='tags',
            field=models.JSONField(blank=True, default=list, help_text='–¢–µ–≥–∏ –∫–≤–µ—Å—Ç–∞'),
        ),
        migrations.AddField(
            model_name='quest',
            name='time_limit',
            field=models.DurationField(blank=True, help_text='–í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ', null=True),
        ),
        migrations.AlterField(
            model_name='quest',
            name='quest_type',
            field=models.CharField(choices=[('dialogue', '–î–∏–∞–ª–æ–≥'), ('combat', '–ë–æ–π'), ('skill_check', '–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–≤—ã–∫–∞'), ('exploration', '–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ'), ('puzzle', '–ì–æ–ª–æ–≤–æ–ª–æ–º–∫–∞'), ('social', '–°–æ—Ü–∏–∞–ª—å–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ'), ('fetch', '–î–æ—Å—Ç–∞–≤–∫–∞'), ('elimination', '–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ'), ('escort', '–≠—Å–∫–æ—Ä—Ç'), ('investigation', '–†–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ')], default='dialogue', max_length=20),
        ),
        migrations.AlterField(
            model_name='quest',
            name='status',
            field=models.CharField(choices=[('available', '–î–æ—Å—Ç—É–ø–µ–Ω'), ('active', '–ê–∫—Ç–∏–≤–µ–Ω'), ('completed', '–ó–∞–≤–µ—Ä—à–µ–Ω'), ('failed', '–ü—Ä–æ–≤–∞–ª–µ–Ω'), ('locked', '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω'), ('paused', '–ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω')], default='available', max_length=20),
        ),
        migrations.CreateModel(
            name='AIConfig',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('model', models.CharField(default='anthropic/claude-3.5-sonnet', max_length=100)),
                ('temperature', models.FloatField(default=0.7, validators=[django.core.validators.MinValueValidator(0.0), django.core.validators.MaxValueValidator(2.0)])),
                ('max_tokens', models.IntegerField(default=1000, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(4000)])),
                ('system_prompt', models.TextField(blank=True, help_text='–ö–∞—Å—Ç–æ–º–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç')),
                ('is_enabled', models.BooleanField(default=True)),
                ('project', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='ai_config', to='core.gameproject')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='ChatSession',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('session_name', models.CharField(blank=True, max_length=200)),
                ('context', models.JSONField(blank=True, default=dict, help_text='–ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞ (–∂–∞–Ω—Ä, —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å, –ø–µ—Ä—Å–æ–Ω–∞–∂–∏)')),
                ('is_active', models.BooleanField(default=True)),
                ('project', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='chat_sessions', to='core.gameproject')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='chat_sessions', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='ChatMessage',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('role', models.CharField(choices=[('user', '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'), ('assistant', '–ò–ò-–ø–æ–º–æ—â–Ω–∏–∫'), ('system', '–°–∏—Å—Ç–µ–º–∞')], max_length=20)),
                ('content', models.TextField()),
                ('metadata', models.JSONField(blank=True, default=dict, help_text='–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–º–æ–¥–µ–ª—å, —Ç–æ–∫–µ–Ω—ã, –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞)')),
                ('is_ai_generated', models.BooleanField(default=False)),
                ('session', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='messages', to='core.chatsession')),
            ],
            options={
                'ordering': ['created_at'],
            },
        ),
        migrations.CreateModel(
            name='QuestObjective',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True)),
                ('objective_type', models.CharField(choices=[('dialogue', '–î–∏–∞–ª–æ–≥'), ('kill', '–£–±–∏—Ç—å'), ('collect', '–°–æ–±—Ä–∞—Ç—å'), ('deliver', '–î–æ—Å—Ç–∞–≤–∏—Ç—å'), ('reach', '–î–æ—Å—Ç–∏—á—å'), ('interact', '–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å'), ('skill_check', '–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–≤—ã–∫–∞'), ('time_limit', '–í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ')], default='dialogue', max_length=20)),
                ('is_completed', models.BooleanField(default=False)),
                ('is_optional', models.BooleanField(default=False)),
                ('order', models.IntegerField(default=0)),
                ('required_count', models.IntegerField(default=1, help_text='–¢—Ä–µ–±—É–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ')),
                ('current_count', models.IntegerField(default=0, help_text='–¢–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ')),
                ('metadata', models.JSONField(blank=True, default=dict, help_text='–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ü–µ–ª–∏')),
                ('completion_dialogue', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='objective_completions', to='core.dialogue')),
                ('quest', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='objectives', to='core.quest')),
                ('trigger_dialogue', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='objective_triggers', to='core.dialogue')),
            ],
            options={
                'ordering': ['order', 'created_at'],
            },
        ),
        migrations.AddField(
            model_name='dialogueoption',
            name='quest_objective_completion',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='completion_options', to='core.questobjective'),
        ),
        migrations.AddField(
            model_name='dialogueoption',
            name='quest_objective_trigger',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='trigger_options', to='core.questobjective'),
        ),
    ]
